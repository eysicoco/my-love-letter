<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>A letter for you üå∏</title>

<style>
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
  margin: 0;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  /* Animated Gradient Background */
  background: linear-gradient(45deg, #ffd6e8, #e0c3fc, #c2f0fc, #ffd6e8);
  background-size: 400% 400%;
  animation: gradientBG 15s ease infinite;
  font-family: "Segoe UI", sans-serif;
  overflow: hidden;
}

@keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* Floating Elements with Rotation */
.floating-item {
  position: absolute;
  bottom: -10%;
  animation: floatUp 10s linear infinite;
  opacity: 0.6;
  will-change: transform;
  pointer-events: none;
}

@keyframes floatUp {
    0% { transform: translateY(0) rotate(0deg); }
    100% { transform: translateY(-120vh) rotate(360deg); }
}

/* Interactive Ripple Particle */
.ripple {
  position: absolute;
  pointer-events: none;
  font-size: 20px;
  animation: rippleOut 0.8s ease-out forwards;
  z-index: 100;
}
@keyframes rippleOut {
  0% { transform: scale(0.5); opacity: 1; }
  100% { transform: scale(2.5) translateY(-20px); opacity: 0; }
}

/* Clouds for depth */
.cloud {
  position: absolute;
  background: white;
  filter: blur(30px);
  opacity: 0.3;
  border-radius: 50%;
  pointer-events: none;
}

/* Envelope Container */
.envelope {
  width: 90vw;
  max-width: 350px;
  height: 150px;
  position: relative;
  cursor: pointer;
  transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 10;
}
.envelope.open { height: 380px; transform: translateY(-20px); }

.envelope-body {
  width: 100%;
  height: 100%;
  background: #fffafc;
  border-radius: 15px;
  box-shadow: 0 15px 35px rgba(255,105,180,0.2);
  position: absolute;
  border: 1px solid #ffe3f1;
}

.flap {
  position: absolute;
  width: 100%;
  height: 100%;
  background: #ffd6e8;
  clip-path: polygon(0 0, 100% 0, 50% 60%);
  border-radius: 15px 15px 0 0;
  transform-origin: top;
  transition: transform 0.5s ease;
  z-index: 3;
}
.envelope.open .flap { transform: rotateX(160deg); }

.paper {
  position: absolute;
  width: 92%;
  height: 88%;
  top: 8%;
  left: 4%;
  background: white;
  border-radius: 10px;
  padding: 15px;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.4s ease;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  z-index: 2;
}
.envelope.open .paper { opacity: 1; visibility: visible; z-index: 4; }

.photo-frame {
  width: 100%;
  height: 120px;
  background: #fff;
  padding: 5px;
  border: 1px solid #eee;
  margin-bottom: 10px;
}
.photo-frame img { width: 100%; height: 100%; object-fit: cover; }

.title { text-align: center; font-weight: bold; color: #ff6fa5; margin-bottom: 10px; }
#typed { font-size: 0.95rem; line-height: 1.4; color: #444; white-space: pre-line; }

</style>
</head>
<body onclick="createRipple(event)">

<div class="cloud" style="width: 200px; height: 100px; top: 10%; left: -50px;"></div>
<div class="cloud" style="width: 300px; height: 150px; bottom: 5%; right: -50px;"></div>

<div class="floating-item" style="left:5%; font-size: 25px;">‚ú®</div>
<div class="floating-item" style="left:25%; animation-delay:2s; font-size: 30px;">üå∏</div>
<div class="floating-item" style="left:55%; animation-delay:5s; font-size: 20px;">‚òÅÔ∏è</div>
<div class="floating-item" style="left:85%; animation-delay:1s; font-size: 28px;">üå∑</div>

<div class="envelope" id="myEnvelope" onclick="toggleLetter(event)">
  <div class="flap"></div>
  <div class="envelope-body"></div>

  <div class="paper" onclick="event.stopPropagation()">
    <div class="photo-frame">
      <img src="photo.jpg" alt="love">
    </div>
    <div class="title">For You üíå</div>
    <div id="typed"></div>
  </div>
</div>

<audio id="music" loop>
  <source src="Cinnamon.mp3" type="audio/mpeg">
</audio>

<script>
let i = 0;
let isTyping = false;
const text = `Hi love,

I made this just for you.
I hope this makes your day a bit brighter.

Thank you for being someone warm, kind, and special in my life.

No matter how busy things get, remember someone is always cheering for you.

‚Äî Allen üå∏`;

function typeWriter() {
  if (i < text.length) {
    document.getElementById("typed").innerHTML += text.charAt(i);
    i++;
    setTimeout(typeWriter, 40);
  }
}

// Background Interaction Logic
function createRipple(e) {
  const ripple = document.createElement("div");
  ripple.className = "ripple";
  // Random emoji for each tap
  const emojis = ["‚ù§Ô∏è", "‚ú®", "üíñ", "üå∏", "‚òÅÔ∏è"];
  ripple.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
  
  ripple.style.left = (e.clientX || e.touches[0].clientX) - 10 + "px";
  ripple.style.top = (e.clientY || e.touches[0].clientY) - 10 + "px";
  
  document.body.appendChild(ripple);
  setTimeout(() => ripple.remove(), 800);
}

function toggleLetter(e) {
  const el = document.getElementById("myEnvelope");
  const music = document.getElementById("music");

  if (!el.classList.contains("open")) {
    el.classList.add("open");
    music.volume = 0.4;
    music.play().catch(() => {});

    if (!isTyping) {
        isTyping = true;
        setTimeout(typeWriter, 600);
    }
  } else {
    el.classList.remove("open");
  }
}
</script>
</body>
</html>
  box-shadow: inset 0 0 8px rgba(0,0,0,0.05);
  padding: 14px;
  opacity: 0;
  transition: opacity 0.8s 0.3s;
  overflow-y: auto;
}

/* flap & paper open */
.envelope.open .flap { transform: rotateX(180deg); }
.envelope.open .paper { opacity: 1; }

/* photo frame */
.photo-frame {
  width: 100%;
  height: 90px;
  background: #fff;
  padding: 6px 6px 16px 6px;
  border-radius: 8px;
  box-shadow: 0 0 12px rgba(255,105,180,0.6);
  position: relative;
  animation: glow 2s infinite alternate;
  margin-bottom: 8px;
}
.photo-frame img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 4px;
}
.photo-frame::after {
  content: "üíó üíû üíó";
  position: absolute;
  top: -14px;
  left: 10px;
  font-size: 14px;
  animation: floatHearts 2s infinite;
}
@keyframes glow { from {box-shadow:0 0 8px rgba(255,105,180,0.4);} to {box-shadow:0 0 18px rgba(255,105,180,0.9);} }
@keyframes floatHearts { 0% {opacity:0; transform:translateY(0);} 50% {opacity:1; transform:translateY(-6px);} 100% {opacity:0; transform:translateY(-12px);} }

/* title gradient */
.title {
  text-align: center;
  font-weight: bold;
  margin-bottom: 8px;
  font-size: 18px;
  background: linear-gradient(90deg, #ff6fa5, #c77dff);
  -webkit-background-clip: text;
  color: transparent;
  animation: titleGlow 2s infinite alternate;
}
@keyframes titleGlow { from { filter: drop-shadow(0 0 2px #ff9ac7); } to { filter: drop-shadow(0 0 10px #ff6fa5); } }

@media (max-width: 380px) {
  .paper { font-size: 13px; }
}

</style>
</head>
<body>

<!-- floating flowers -->
<div class="flower" style="left:8%">üå∏</div>
<div class="flower" style="left:25%; animation-delay:1s">üå∑</div>
<div class="flower" style="left:50%; animation-delay:2s">üåº</div>
<div class="flower" style="left:72%; animation-delay:3s">üå∏</div>

<!-- sparkles -->
<div class="sparkle" style="left:20%; top:30%">‚ú®</div>
<div class="sparkle" style="left:70%; top:60%; animation-delay:1s">‚ú®</div>
<div class="sparkle" style="left:40%; top:20%; animation-delay:2s">‚ú®</div>

<!-- envelope -->
<div class="envelope" onclick="openLetter(this)">
  <div class="envelope-body"></div>
  <div class="flap"></div>

  <div class="paper">
    <div class="photo-frame">
      <img src="photo.jpg">
    </div>

    <div class="title">For You üíå</div>
    <div id="typed"></div>
  </div>
</div>

<!-- music -->
<audio id="music" loop>
  <source src="Cinnamon.mp3" type="audio/mpeg">
</audio>
<audio id="openSound">
  <source src="open.mp3" type="audio/mpeg">
</audio>

<script>
let i = 0;
const text = `Hi love,

I made this pastel envelope just for you.
I hope this little surprise makes your day softer.

Thank you for being someone warm,
kind, and special in my life.

No matter how busy days get,
remember someone out here
is always cheering for you.

‚Äî Allen üå∏`;

function typeWriter() {
  if (i < text.length) {
    document.getElementById("typed").innerHTML += text.charAt(i);
    i++;
    setTimeout(typeWriter, 35);
  }
}

function confettiBurst() {
  const emojis = ["üíó","‚ú®","üå∏","üíû","üíñ"];
  for (let j = 0; j < 20; j++) {
    let c = document.createElement("div");
    c.className = "confetti";
    c.innerHTML = emojis[Math.floor(Math.random()*emojis.length)];
    c.style.left = Math.random()*100 + "vw";
    c.style.top = "65vh";
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),1800);
  }
}

function openLetter(el) {
  const envelope = el;

  // toggle open state
  envelope.classList.toggle("open");

  if (envelope.classList.contains("open")) {
    envelope.classList.add("expand"); // expand envelope
    typeWriter();
    confettiBurst();
    document.getElementById("music").play().catch(()=>{});
    document.getElementById("openSound").play().catch(()=>{});
  } else {
    envelope.classList.remove("expand"); // shrink envelope immediately even if typing
  }
}
</script>
</body>
</html>
